{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{useNavigate,Link}from'react-router-dom';import'./HomePage.css';// Импортируем новый CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){const navigate=useNavigate();const[projects,setProjects]=useState([]);const[loadingProjects,setLoadingProjects]=useState(true);const fetchProjects=useCallback(async()=>{try{const response=await fetch('/api/projects');if(!response.ok){throw new Error('Failed to fetch projects');}const data=await response.json();setProjects(data);setLoadingProjects(false);}catch(err){console.error(\"Error fetching projects:\",err);setLoadingProjects(false);// Можно добавить сообщение об ошибке, если нужно\n}},[]);useEffect(()=>{fetchProjects();// Обновляем список проектов каждые 5 секунд\nconst interval=setInterval(fetchProjects,5000);return()=>clearInterval(interval);// Очистка интервала при размонтировании компонента\n},[fetchProjects]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container home-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\\u043C\\u0438 VSS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/create-project\",className:\"action-button\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\"}),/*#__PURE__*/_jsx(Link,{to:\"/check-dependencies\",className:\"action-button\",children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0435\\u0439\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{margin:'40px 0',borderColor:'#eee'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"projects-list-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u044E\\u0449\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"}),loadingProjects?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432...\"}):projects.length===0?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u044B. \",/*#__PURE__*/_jsx(Link,{to:\"/create-project\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442!\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"project-list\",children:projects.map(project=>/*#__PURE__*/_jsxs(\"li\",{className:\"project-item\",onClick:()=>navigate(`/project/${project.id}`),children:[/*#__PURE__*/_jsx(\"h3\",{children:project.projectName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"ID: \",project.id]})]},project.id))})]})]});}export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","HomePage","navigate","projects","setProjects","loadingProjects","setLoadingProjects","fetchProjects","response","fetch","ok","Error","data","json","err","console","error","interval","setInterval","clearInterval","className","children","to","style","margin","borderColor","length","map","project","onClick","id","projectName"],"sources":["/root/install-wizard/docker-templates/frontend-app-template/src/HomePage.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport './HomePage.css'; // Импортируем новый CSS\n\nfunction HomePage() {\n    const navigate = useNavigate();\n    const [projects, setProjects] = useState([]);\n    const [loadingProjects, setLoadingProjects] = useState(true);\n\n    const fetchProjects = useCallback(async () => {\n        try {\n            const response = await fetch('/api/projects');\n            if (!response.ok) {\n                throw new Error('Failed to fetch projects');\n            }\n            const data = await response.json();\n            setProjects(data);\n            setLoadingProjects(false);\n        }\n        catch (err) {\n            console.error(\"Error fetching projects:\", err);\n            setLoadingProjects(false);\n            // Можно добавить сообщение об ошибке, если нужно\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchProjects();\n        // Обновляем список проектов каждые 5 секунд\n        const interval = setInterval(fetchProjects, 5000);\n        return () => clearInterval(interval); // Очистка интервала при размонтировании компонента\n    }, [fetchProjects]);\n\n    return (\n        <div className=\"page-container home-page\">\n            <h1>Панель управления проектами VSS</h1>\n\n            <div className=\"actions-section\">\n                <h2>Действия:</h2>\n                <div className=\"action-buttons\">\n                    <Link to=\"/create-project\" className=\"action-button\">\n                        Создать новый проект\n                    </Link>\n                    <Link to=\"/check-dependencies\" className=\"action-button\">\n                        Проверка зависимостей\n                    </Link>\n                </div>\n            </div>\n\n            <hr style={{ margin: '40px 0', borderColor: '#eee' }} />\n\n            <div className=\"projects-list-section\">\n                <h2>Существующие проекты</h2>\n                {loadingProjects ? (\n                    <p>Загрузка проектов...</p>\n                ) : projects.length === 0 ? (\n                    <p>Проекты пока не созданы. <Link to=\"/create-project\">Создайте первый проект!</Link></p>\n                ) : (\n                    <ul className=\"project-list\">\n                        {projects.map((project) => (\n                            <li key={project.id} className=\"project-item\" onClick={() => navigate(`/project/${project.id}`)}>\n                                <h3>{project.projectName}</h3>\n                                <p>ID: {project.id}</p>\n                            </li>\n                        ))}\n                    </ul>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default HomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
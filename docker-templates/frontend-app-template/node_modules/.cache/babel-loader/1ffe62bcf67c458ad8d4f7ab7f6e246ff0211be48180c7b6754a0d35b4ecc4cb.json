{"ast":null,"code":"// /root/install-wizard/docker-templates/frontend-app-template/src/DependenciesCheckPage.js\nimport React,{useState,useEffect}from'react';import'./DependenciesCheckPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DependenciesCheckPage(_ref){let{onDependenciesReady}=_ref;const[dockerStatus,setDockerStatus]=useState('Проверка...');const[composeStatus,setComposeStatus]=useState('Проверка...');const[nodeStatus,setNodeStatus]=useState('Проверка...');const[allDependenciesMet,setAllDependenciesMet]=useState(false);const[dockerVersion,setDockerVersion]=useState('');const[composeVersion,setComposeVersion]=useState('');const[nodeVersion,setNodeVersion]=useState('');useEffect(()=>{// Эта функция будет делать реальный запрос к бэкенду\nconst checkDependencies=async()=>{try{const response=await fetch('/api/check-dependencies');const data=await response.json();setDockerStatus(data.docker.installed?'Установлено':'Не установлено');setDockerVersion(data.docker.version);setComposeStatus(data.dockerCompose.installed?'Установлен':'Не установлен');setComposeVersion(data.dockerCompose.version);setNodeStatus(data.nodejs.installed?'Установлен':'Не установлен');setNodeVersion(data.nodejs.version);setAllDependenciesMet(data.allDependenciesMet);// Если все зависимости мет, можно вызвать onDependenciesReady,\n// но в данном гибридном мастере это, возможно, не приведет к глобальному переходу шага\n// (это будет делать public/script.js)\nif(data.allDependenciesMet&&onDependenciesReady){// onDependenciesReady(); // Этот вызов может быть избыточен, если public/script.js управляет переходом\n}}catch(error){console.error('Ошибка при проверке зависимостей (React):',error);setDockerStatus('Ошибка');setComposeStatus('Ошибка');setNodeStatus('Ошибка');setAllDependenciesMet(false);}};checkDependencies();// Запускаем проверку при монтировании компонента\n},[onDependenciesReady]);// onDependenciesReady в зависимостях, если он меняется\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"dependencies-check-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0428\\u0430\\u0433 1: \\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0435\\u0439 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u044B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-section\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Docker: \",/*#__PURE__*/_jsx(\"span\",{style:{color:dockerStatus==='Установлено'?'green':'red'},children:dockerStatus}),\" (\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F: \",dockerVersion||'Неизвестно',\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Docker Compose: \",/*#__PURE__*/_jsx(\"span\",{style:{color:composeStatus==='Установлен'?'green':'red'},children:composeStatus}),\" (\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F: \",composeVersion||'Неизвестно',\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Node.js: \",/*#__PURE__*/_jsx(\"span\",{style:{color:nodeStatus==='Установлен'?'green':'red'},children:nodeStatus}),\" (\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F: \",nodeVersion||'Неизвестно',\")\"]})]}),!allDependenciesMet&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435 \\u0438\\u043B\\u0438 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u0442\\u0435 \\u0432\\u0441\\u0435 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u044B\\u0435 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438.\"}),allDependenciesMet&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:\"\\u0412\\u0441\\u0435 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B.\"})]});}export default DependenciesCheckPage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","DependenciesCheckPage","_ref","onDependenciesReady","dockerStatus","setDockerStatus","composeStatus","setComposeStatus","nodeStatus","setNodeStatus","allDependenciesMet","setAllDependenciesMet","dockerVersion","setDockerVersion","composeVersion","setComposeVersion","nodeVersion","setNodeVersion","checkDependencies","response","fetch","data","json","docker","installed","version","dockerCompose","nodejs","error","console","className","children","style","color"],"sources":["/root/install-wizard/docker-templates/frontend-app-template/src/DependenciesCheckPage.js"],"sourcesContent":["// /root/install-wizard/docker-templates/frontend-app-template/src/DependenciesCheckPage.js\n\nimport React, { useState, useEffect } from 'react';\nimport './DependenciesCheckPage.css';\n\nfunction DependenciesCheckPage({ onDependenciesReady }) {\n    const [dockerStatus, setDockerStatus] = useState('Проверка...');\n    const [composeStatus, setComposeStatus] = useState('Проверка...');\n    const [nodeStatus, setNodeStatus] = useState('Проверка...');\n    const [allDependenciesMet, setAllDependenciesMet] = useState(false);\n    \n    const [dockerVersion, setDockerVersion] = useState('');\n    const [composeVersion, setComposeVersion] = useState('');\n    const [nodeVersion, setNodeVersion] = useState('');\n\n    useEffect(() => {\n        // Эта функция будет делать реальный запрос к бэкенду\n        const checkDependencies = async () => {\n            try {\n                const response = await fetch('/api/check-dependencies');\n                const data = await response.json();\n\n                setDockerStatus(data.docker.installed ? 'Установлено' : 'Не установлено');\n                setDockerVersion(data.docker.version);\n\n                setComposeStatus(data.dockerCompose.installed ? 'Установлен' : 'Не установлен');\n                setComposeVersion(data.dockerCompose.version);\n\n                setNodeStatus(data.nodejs.installed ? 'Установлен' : 'Не установлен');\n                setNodeVersion(data.nodejs.version);\n\n                setAllDependenciesMet(data.allDependenciesMet);\n\n                // Если все зависимости мет, можно вызвать onDependenciesReady,\n                // но в данном гибридном мастере это, возможно, не приведет к глобальному переходу шага\n                // (это будет делать public/script.js)\n                if (data.allDependenciesMet && onDependenciesReady) {\n                    // onDependenciesReady(); // Этот вызов может быть избыточен, если public/script.js управляет переходом\n                }\n\n            } catch (error) {\n                console.error('Ошибка при проверке зависимостей (React):', error);\n                setDockerStatus('Ошибка');\n                setComposeStatus('Ошибка');\n                setNodeStatus('Ошибка');\n                setAllDependenciesMet(false);\n            }\n        };\n\n        checkDependencies(); // Запускаем проверку при монтировании компонента\n    }, [onDependenciesReady]); // onDependenciesReady в зависимостях, если он меняется\n\n    return (\n        <div className=\"dependencies-check-page\">\n            <h2>Шаг 1: Проверка зависимостей системы</h2>\n            <div className=\"status-section\">\n                <p>Docker: <span style={{ color: dockerStatus === 'Установлено' ? 'green' : 'red' }}>{dockerStatus}</span> (Версия: {dockerVersion || 'Неизвестно'})</p>\n                <p>Docker Compose: <span style={{ color: composeStatus === 'Установлен' ? 'green' : 'red' }}>{composeStatus}</span> (Версия: {composeVersion || 'Неизвестно'})</p>\n                <p>Node.js: <span style={{ color: nodeStatus === 'Установлен' ? 'green' : 'red' }}>{nodeStatus}</span> (Версия: {nodeVersion || 'Неизвестно'})</p>\n            </div>\n            {!allDependenciesMet && (\n                <div className=\"error-message\">\n                    Пожалуйста, установите или настройте все необходимые зависимости.\n                </div>\n            )}\n            {allDependenciesMet && (\n                <div className=\"success-message\">\n                    Все зависимости успешно проверены.\n                    {/* Кнопка \"Продолжить\" здесь может быть, но основная будет из public/index.html */}\n                    {/* <button onClick={onDependenciesReady}>Продолжить</button> */}\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default DependenciesCheckPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
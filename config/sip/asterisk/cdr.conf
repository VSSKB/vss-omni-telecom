; VSS OMNI TELECOM - Asterisk CDR Configuration
; Полная конфигурация Call Detail Records с PostgreSQL

[general]
; Включение CDR
enable=yes
; Логирование неотвеченных вызовов
unanswered=yes
; Логирование перегруженных вызовов
congestion=yes
; Логирование завершенных до перехода к следующему extension
endbeforehexten=yes
; Использование GMT времени
usegmtime=yes
; Логирование уникального ID
loguniqueid=yes
; Логирование пользовательского поля
loguserfield=yes
; Логирование связанного ID
loglinkedid=yes

; ============================================
; POSTGRESQL CDR BACKEND
; ============================================

[postgresql]
enabled=yes
; DSN будет заменен скриптом запуска из переменных окружения
dsn=postgresql://vss:vss_postgres_pass@postgres:5432/vss_db
table=cdr_records
usegmtime=yes
loguniqueid=yes
loguserfield=yes
loglinkedid=yes

; Маппинг полей CDR на колонки таблицы
accountcode=accountcode
src=from_number
dst=to_number
dcontext=context
clid=clid
channel=channel
dstchannel=dstchannel
lastapp=lastapp
lastdata=lastdata
start=start_time
answer=answer_time
end=end_time
duration=duration
billsec=billable_duration
disposition=disposition
amaflags=amaflags
uniqueid=uniqueid
userfield=userfield
peeraccount=peeraccount
linkedid=linkedid
sequence=sequence

; Дополнительные поля
; Запись CDR при каждом изменении
; batch=yes
; interval=60


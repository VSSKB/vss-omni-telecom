# VSS OMNI TELECOM - –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º

**–î–∞—Ç–∞:** 2025-12-04  
**–í—Ä–µ–º—è:** 11:11  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** npm run start:all logs

---

## üî¥ –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[DCI] [DB] ‚ùå Connection failed
[OTTB] [DB] ‚ùå Connection failed  
[POINT] [DB] ‚ùå Connection failed
[WORKSPACE] [DB] ‚ùå Connection failed
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ localhost:5432, –Ω–æ –ë–î –Ω–µ—Ç

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ùå –í—Å–µ API endpoints –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è
- ‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Å–ª–æ—Ç–æ–≤, –∑–≤–æ–Ω–∫–æ–≤, CRM

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Docker Compose
docker-compose -f docker-compose.vss-demiurge-simple.yml up -d postgres

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps | grep postgres

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs vss-postgres

# 4. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker exec vss-postgres psql -U vss -d vss_db -c "SELECT 1"
```

---

### 2. ‚ùå RabbitMQ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[OTTB] RabbitMQ connection error: Socket closed abruptly during opening handshake
[DCI] RabbitMQ connection error: Socket closed abruptly during opening handshake
[POINT] RabbitMQ connection error: Socket closed abruptly during opening handshake
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- RabbitMQ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –°–µ—Ä–≤–∏—Å—ã –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ localhost:5672

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ùå –°–æ–±—ã—Ç–∏—è F-Flow –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå –ê–≤—Ç–æ–¥–æ–∑–≤–æ–Ω –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚ùå Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å RabbitMQ
docker-compose -f docker-compose.vss-demiurge-simple.yml up -d rabbitmq

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps | grep rabbitmq

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs vss-rabbitmq

# 4. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker exec vss-rabbitmq rabbitmq-diagnostics ping
```

---

### 3. ‚ö†Ô∏è CORS –æ—à–∏–±–∫–∏ –≤ OTTB

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[ottb] Error: Not allowed by CORS
    at origin (C:\Users\Administrator\Documents\vss-omni-telecom\services\ottb\index.js:29:22)
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ó–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ –≤ index.js:29

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è Frontend –Ω–µ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ OTTB API
- ‚ö†Ô∏è Cross-origin requests –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å CORS –≤ `services/ottb/index.js`:
```javascript
// –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ 18-19:
app.use(cors());

// –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins:
app.use(cors({
  origin: ['http://localhost:3000', 'http://localhost:3001', '*'],
  credentials: true
}));
```

---

### 4. ‚ÑπÔ∏è ADB —ç–º—É–ª—è—Ç–æ—Ä offline (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[demiurge] [ADB] devices [ { id: 'emulator-5554', type: 'offline' } ]
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- Android —ç–º—É–ª—è—Ç–æ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ADB –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —ç–º—É–ª—è—Ç–æ—Ä—É

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ÑπÔ∏è GACS —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Android –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ÑπÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Android —Å–ª–æ—Ç–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Android —ç–º—É–ª—è—Ç–æ—Ä
# –ò–ª–∏
# 2. –û—Ç–∫–ª—é—á–∏—Ç—å ADB –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

---

### 5. ‚ÑπÔ∏è WORKSPACE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 3001 –≤–º–µ—Å—Ç–æ 3000

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[workspace] [WORKSPACE] ‚ö†Ô∏è  –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3001
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ—Ä—Ç 3000 —É–∂–µ –∑–∞–Ω—è—Ç (–≤–µ—Ä–æ—è—Ç–Ω–æ Install Wizard)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª –Ω–∞ 3001

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è Frontend –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–µ –Ω–∞ —Ç–æ—Ç –ø–æ—Ä—Ç
- ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ 3000, –∞ —Å–µ—Ä–≤–∏—Å –Ω–∞ 3001

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Install Wizard (–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 3000)
2. –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –ø–æ—Ä—Ç 3001

---

### 6. ‚ÑπÔ∏è RabbitMQ –æ—Ç–∫–ª—é—á–µ–Ω –≤ WORKSPACE

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[workspace] [WORKSPACE] ‚ÑπÔ∏è  RabbitMQ –æ—Ç–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è RABBITMQ_ENABLED=false
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í .env —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `RABBITMQ_ENABLED=false`

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ÑπÔ∏è Real-time —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ RabbitMQ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ÑπÔ∏è WebSocket —Å–æ–±—ã—Ç–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
–í–∫–ª—é—á–∏—Ç—å RabbitMQ –≤ .env:
```env
RABBITMQ_ENABLED=true
```

---

## üéØ –ö–†–ò–¢–ò–ß–ù–û–°–¢–¨ –ü–†–û–ë–õ–ï–ú

| –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|-------------|--------|-----------|
| PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | 1 |
| RabbitMQ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø | –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | 2 |
| CORS –æ—à–∏–±–∫–∏ | üü° –°–†–ï–î–ù–Ø–Ø | –ß–∞—Å—Ç–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ | 3 |
| ADB offline | üü¢ –ù–ò–ó–ö–ê–Ø | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è | 4 |
| –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç | üü¢ –ù–ò–ó–ö–ê–Ø | –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 3001 | 5 |
| RabbitMQ disabled | üü¢ –ù–ò–ó–ö–ê–Ø | –û—Ç–∫–ª—é—á–µ–Ω –≤—Ä—É—á–Ω—É—é | 6 |

---

## ‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ RabbitMQ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
npm run stop
# –ò–ª–∏ Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Docker Compose
docker-compose -f docker-compose.vss-demiurge-simple.yml up -d postgres rabbitmq redis

# –î–æ–∂–¥–∞—Ç—å—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (60 —Å–µ–∫)
Start-Sleep -Seconds 60

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.vss-demiurge-simple.yml ps
```

---

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å CORS –≤ OTTB

```javascript
// –í —Ñ–∞–π–ª–µ services/ottb/index.js —Å—Ç—Ä–æ–∫–∞ 18
// –ó–∞–º–µ–Ω–∏—Ç—å:
app.use(cors());

// –ù–∞:
app.use(cors({
  origin: '*',  // –ò–ª–∏ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã
  credentials: true
}));
```

---

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã Node.js
npm run start:services

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose -f docker-compose.vss-demiurge-simple.yml up -d
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å healthchecks
curl http://localhost:3000/health
curl http://localhost:8081/health
curl http://localhost:8082/health
curl http://localhost:8083/health
```

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –°–ï–†–í–ò–°–û–í

### ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ Install Wizard - http://localhost:3000
- ‚úÖ Admin Backend - http://localhost:8095
- ‚úÖ VSS Demiurge - http://localhost:8181

### ‚ö†Ô∏è –ó–∞–ø—É—â–µ–Ω—ã –Ω–æ —Å –æ—à–∏–±–∫–∞–º–∏:
- ‚ö†Ô∏è WORKSPACE - –ø–æ—Ä—Ç 3001 (–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
- ‚ö†Ô∏è OTTB - –ø–æ—Ä—Ç 8083 (–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, CORS –æ—à–∏–±–∫–∏)
- ‚ö†Ô∏è DCI - –ø–æ—Ä—Ç 8082 (–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)
- ‚ö†Ô∏è POINT - –ø–æ—Ä—Ç 8081 (–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)

### ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚ùå PostgreSQL - –Ω–µ –∑–∞–ø—É—â–µ–Ω
- ‚ùå RabbitMQ - –Ω–µ –∑–∞–ø—É—â–µ–Ω (–∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- ‚ùå Redis - —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω

---

## üöÄ –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (1 –∫–æ–º–∞–Ω–¥–∞)

```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å npm –ø—Ä–æ—Ü–µ—Å—Å—ã (Ctrl+C)
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å:

docker-compose -f docker-compose.vss-demiurge-simple.yml up -d

# –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –í–°–ï —Å–µ—Ä–≤–∏—Å—ã –≤–∫–ª—é—á–∞—è PostgreSQL –∏ RabbitMQ
```

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm run start:all` –±–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤!**

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

1. **–°–Ω–∞—á–∞–ª–∞** –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (PostgreSQL, RabbitMQ, Redis):
   ```bash
   docker-compose -f docker-compose.vss-demiurge-simple.yml up -d
   ```

2. **–ü–æ—Ç–æ–º** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∑–∞–ø—É—Å—Ç–∏—Ç—å Node.js —Å–µ—Ä–≤–∏—Å—ã –Ω–∞–ø—Ä—è–º—É—é:
   ```bash
   npm run start:services
   ```

**–ò–õ–ò** –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose –¥–ª—è –≤—Å–µ–≥–æ:
```bash
docker-compose -f docker-compose.vss-demiurge-simple.yml up -d --build
```

---

## üéØ –ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢

**–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:** üü° –ß–ê–°–¢–ò–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. üî¥ PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω - **–ö–†–ò–¢–ò–ß–ù–û**
2. üî¥ RabbitMQ –Ω–µ –∑–∞–ø—É—â–µ–Ω - **–ö–†–ò–¢–ò–ß–ù–û**
3. üü° CORS misconfiguration - **–°–†–ï–î–ù–ï**

**–ü—Ä–æ—Ü–µ–Ω—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:** ~30%

**–î–µ–π—Å—Ç–≤–∏—è:**
‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Compose —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π  
‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å CORS –≤ OTTB  
‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω:** 2025-12-04 11:11  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å `docker-compose -f docker-compose.vss-demiurge-simple.yml up -d`


